<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1">
    <meta name="renderer" content="webkit">
    <title>每日日志</title>
</head>
<body>
<style type="text/css">
    body {
        font-family: "Microsoft Yahei", "微软雅黑", "宋体", Arial, Helvetica, sans-serif;
    }

    body {
        line-height: 1.42857143;
        color: #333;
    }

    .container {
        width: 1270px;
    }

    .container {
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto;
    }

    .font16 {
        font-size: 16px;
    }

    .pull-right {
        float: right !important;
    }

    .btn-primary {
        color: #fff;
        background-color: #337ab7;
        border-color: #2e6da4;
    }

    .btn {
        display: inline-block;
        padding: 6px 12px;
        margin-bottom: 0;
        font-size: 14px;
        font-weight: normal;
        line-height: 1.42857143;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -ms-touch-action: manipulation;
        touch-action: manipulation;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background-image: none;
        border: 1px solid transparent;
        border-radius: 4px;
    }

    a {
        background-color: transparent;
    }

    a {
        color: #337ab7;
        text-decoration: none;
    }

    .clear {
        clear: both;
    }

    .bottom20 {
        margin-bottom: 20px;
    }

    .table-bordered {
        border: 1px solid #ddd;
    }

    .table {
        width: 100%;
        max-width: 100%;
        margin-bottom: 20px;
    }

    table {
        background-color: transparent;
    }

    table {
        border-spacing: 0;
        border-collapse: collapse;
    }

    .table-bordered > thead > tr > th, .table-bordered > tbody > tr > th, .table-bordered > tfoot > tr > th, .table-bordered > thead > tr > td, .table-bordered > tbody > tr > td, .table-bordered > tfoot > tr > td {
        border: 1px solid #ddd;
    }

    .table > thead > tr > th, .table > tbody > tr > th, .table > tfoot > tr > th, .table > thead > tr > td, .table > tbody > tr > td, .table > tfoot > tr > td {
        padding: 8px;
        line-height: 1.42857143;
        vertical-align: top;
        border-top: 1px solid #ddd;
    }

    .api-list-table th, .api-list-table td {
        word-break: break-all;
        word-wrap: break-word;
    }

    th {
        text-align: left;
    }

    .yellowBg {
        background: #feed01;
    }

    .redBg {
        background: #e40203;
    }

    .orgBg {
        background: #ff8b00;
    }

    .greenBg {
        background: #007f28;
    }

    .width150 {
        width: 150px;
    }

    .box-side {
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 5px;
        padding: 5px 0;
    }

    input, button, select, textarea {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
    }

    .width300 {
        width: 300px;
    }
</style>
<div class="container font16">
    <a class="btn btn-primary pull-right" href="http://dms.gene.ac/" title="">DMS</a>

    <div class="clear bottom20">
        <!--<input class="box-side width150" id="start_time" onkeyup="update_search_url(0);" value="" placeholder="开始时间08:41:15"/>
        <input class="box-side width150" id="end_time" onkeyup="update_search_url(0);" value="" placeholder="结束时间8:45:15"/>-->
        <select class="box-side width150 margin10" id="log_level" name="log_level" onchange="apply_filter();">
            <option value="all">all</option>
            <option value="error">error</option>
            <option value="http_error">http_error</option>
            <option value="bad_req">bad_req</option>
        </select>
        <input class="box-side width300" id="url_prefix" onkeyup="update_search_url(0);" value="" placeholder="调用url"/>
        <input class="box-side width100" id="account" onkeyup="update_search_url(0);" value="" placeholder="调用账户"/>
        <a id="start_search">
            <button class="btn btn-primary" id="btn_new">搜索</button>
        </a>
    </div>
    <div style="position: relative">
        <table class="table table-bordered table-hover api-list-table">
            <tr>
                <th scope="col" width="11%">日志编号</th>
                <th scope="col" width="7%">调用时间</th>
                <th scope="col" width=30%">调用地址</th>
                <th scope="col" width=7%">调用方法</th>
                <th scope="col" width=9%">调用账户</th>
                <th scope="col" width=7%">日志级别</th>
                <th scope="col" width=8%">运行时间</th>
                <th scope="col" width=10%">访问IP</th>
            </tr>
            {{ TR }}
        </table>
    </div>
</div>
<script>
    function apply_filter()
    {
        var log_level = document.getElementById("log_level").value;
        var tr_records = document.getElementsByTagName("tr");
        for(var i=1;i<tr_records.length;i++){
            var tr_item = tr_records[i];
            var td_cells = tr_item.cells;
            var item_level = td_cells[4].innerHTML;
            if(log_level != item_level && log_level != "all"){
                tr_item.style.display = "none";
                continue;
            }
            tr_item.style.display = "";

        }
        console.info("success");
    }
</script>
</body>
</html>