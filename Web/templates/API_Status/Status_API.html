{% extends "base.html" %}

{% block title %}API返回状态码{% endblock %}

{% block js_content %}
    {{ 't_js/Common/my_requests.js' | make_static_html | safe }}
    {{ 't_js/Common/add_node.js' | make_static_html | safe }}
    {{ 't_js/Common/split_page.js' | make_static_html | safe }}
    {{ 't_js/API_Status/status_api.js' | make_static_html | safe }}
{% endblock %}

{% block content %}
    <a class="btn btn-primary pull-right margin20" href="{{ return_url }}" title="">返回API解释</a>
    <div class="clear bottom20">
        <input class="form-control" id="search_code" onkeyup="search_code();" placeholder="搜索状态码"
               value="{{ search_status }}"/>
    </div>
    <div style="position: relative" id="div_list">
        <table class="table table-bordered table-hover api-list-table">
            <tr>
                <th scope="col" width="10%">状态码</th>
                <th scope="col" width="20%">模块</th>
                <th scope="col" width="60%">解释</th>
                {% if del_power %}
                    <th scope="col" width=5%">操作</th>
                {% endif %}
            </tr>
            <template v-for="item in page_status">
            <tr :id="'s_' + item.status_code">
                <td class="status_move" name="status_code">
                    <span>{{item["code_1"]}}</span>
                    <span>{{item["code_2"]}}</span>
                    <span>{{item["code_3"]}}</span>
                    <span>{{item["code_4"]}}</span>
                </td>
                <td>{{module_info[item["code_1"]]["title"]}}-{{module_info[item["code_1"]]["fun_info"][item["code_2"]].title}}</td>
                <td>{{item["code_desc"]}}</td>
                {% if del_power %}
                    <td>
                        <a title="">删除</a>
                    </td>
                {% endif %}
            </tr>
            </template>
        </table>
        <div class="status_out" id="status_code_info">ni</div>
        <ul class="pagination" id="pagination">
            <template v-for="page_num in show_page">
                <li v-if="page_num == current_page" class="active"><a href="javascript:void(0)">{{page_num}}</a></li>
                <li v-else><a href="javascript:void(0)" @click="update_current_page(page_num)">{{page_num}}</a></li>
            </template>
        </ul>
    </div>
    {% if new_power %}
        <button type="button" class="btn btn-primary margin20" id="conBtn">单个新建</button>
        <div class="newMode" style="display: none;">
            <form action="{{ url_for('develop_status_view.new_status') }}" method="post">
                <p class="bottom10">
                    <select class="box-side width150 pull-left margin10" id="service_id" name="service_id"></select>
                    <select class="box-side width150 pull-left margin10 updateinfo" id="fun_id" name="fun_id"></select>
                    <select class="box-side width150 pull-left margin10 updateinfo" id="type_id"
                            name="type_id"></select>
                    <input name="error_id" class="form-control pull-left width100 margin10" id="error_id" required>
                    <input name="error_desc" class="form-control pull-left width366 margin10" id="error_desc" required>
                    <button type="submit" class="btn btn-primary pull-left" id="btn_new">新建</button>
                    <!-- 复选框组 start -->
            <span class="pull-left top6 left5">
             <label class="checkbox-inline updateinfo"><input type="checkbox" id="show_exist"
                                                              value="复选框"/>显示已有状态码</label>
            </span>
                    <!-- 复选框组 end -->
                    <span class="clear block"></span>
                </p>
                <p class="bottom20" id="new_info_show"></p>

                <p id="service_desc"></p>

                <p id="fun_desc"></p>

                <p id="error_type_desc"></p>
            </form>
            {% if new_module_power %}
                <a href="module/">添加状态码模块</a>
            {% endif %}
        </div>
        <a href="mul/">
            <button type="button" class="btn btn-primary margin20" id="mul_new_btn">批量新建</button>
        </a>
    {% endif %}
    <input id="fun_info_url" value="{{ fun_info_url }}" style="display: none">
    <input id="error_type_url" value="{{ error_type_url }}" style="display: none">
{% endblock %}